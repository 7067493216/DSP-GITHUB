<mat-card class="my-card mat-elevation-z8 dsp-cunsumerapplication">
    <mat-toolbar color="primary" class="spaceBetween">
        <span>Application Management Dashboard</span>
        <!-- <button *appHasRole="role.todo_module_add" class="left-position" mat-raised-button (click)="onCreate()">
                <mat-icon>Apply</mat-icon>Apply New Application
            </button> -->
        <div style="display: flex; " class="left-position">
            <!-- <div class="mx-5">
                    <button  style="text-align: right;" mat-raised-button (click)="onComplain()">
                        <mat-icon>add</mat-icon>Apply Complain
                    </button>
                </div> -->
            <!-- <div class="mx-5">
                    <button  style="text-align: right;" mat-raised-button (click)="onFeedback()">
                        <mat-icon>add</mat-icon>Applicant Feedback
                    </button>
                </div> -->
            <div>
                <button mat-raised-button (click)="onCreate()">
                    <mat-icon>add</mat-icon>Apply New Application (नया आवेदन भरे)
                </button>
            </div>
        </div>


    </mat-toolbar>

    <br>

    <div>
        <form [formGroup]="filterForm">
            <div class="dsp-forminfo">
                <div class="row">
                    <div class="col-sm-3">
                        <mat-form-field appearance="outline" class="form-group">
                            <mat-select #myfilter [(value)]="filtertypeSelected" formControlName="filterType"
                                (selectionChange)="getSearchType(myfilter.value)" disableRipple>
                                <mat-option value="nothingSelected" disabled> Select Filter Type</mat-option>
                                <mat-option value="NatureOfWork">Nature Of Work</mat-option>
                                <mat-option value="ApplicantName"> Applicant Name</mat-option>
                                <mat-option value="ApplicationNumber"> ApplicationNumber</mat-option>
                                <!-- <mat-option value="ApplicationStatus">ApplicationStatus</mat-option> -->
                                <mat-option value="allType">All Type Of Application</mat-option>
                            </mat-select>
                            <mat-hint align="end">Please Select Filter Type here ^</mat-hint>
                        </mat-form-field>
                    </div>

                    <div class="col-md-4" *ngIf="dummyBoolean==true"></div>

                    <div class="col-sm-4" *ngIf="searchTypeKeys=='ApplicantName'">
                        <mat-form-field appearance="outline" class="form-group">
                            <mat-label>Applicant Name ( आवेदक का नाम)</mat-label>
                            <input matInput placeholder="" formControlName="filtervalueFirst"
                                (input)="filterByConsumerName($event.target.value)">


                        </mat-form-field>
                        <mat-error *ngIf="filterForm.controls['filtervalueFirst']?.errors?.required">
                            Please Enter Applicant Name
                        </mat-error>
                    </div>

                    <div class="col-sm-4" *ngIf="searchTypeKeys=='ApplicationNumber'">
                        <mat-form-field appearance="outline" class="form-group">
                            <mat-label>Application Number (आवेदन क्रमांक)</mat-label>
                            <input matInput placeholder="Enter Application Number" id=""
                                formControlName="filterValueSecond">
                            <mat-hint>Ex:DS110022022000/SV110022022000</mat-hint>

                        </mat-form-field>
                        <br>
                        <mat-error *ngIf="filterForm.controls['filterValueSecond']?.errors?.required">
                            Please EnterApplication Number
                        </mat-error>
                    </div>

                    <div class="col-sm-4" *ngIf="searchTypeKeys=='ApplicationStatus'">
                        <mat-form-field appearance="outline" class="form-group">
                            <mat-label>Choose a ApplicationStatus</mat-label>
                            <mat-select disableRipple formControlName="filtervaluelast">
                                <!-- <mat-option selected>Choose a ApplicationStatus</mat-option> -->
                                <mat-option *ngFor="let e of ApplicationStatusList" value="{{e.applicationStatusId}}">
                                    {{e.applicationStatusName}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-error *ngIf="filterForm.controls['filtervaluelast']?.errors?.required">
                            Please Select ApplicationStatus
                        </mat-error>
                    </div>

                    <div class="col-sm-4" *ngIf="searchTypeKeys=='NatureOfWork'">
                        <mat-form-field appearance="outline" class="form-group">
                            <mat-label>Choose Nature Of Work</mat-label>
                            <!-- {{ApplicationStatusList|json}} -->
                            <mat-select disableRipple formControlName="filterValueFourth">
                                <mat-option *ngFor="let e of NatureOfworkTypeList" value="{{e.natureOfWorkTypeId}}">
                                    {{e.natureOfWorkName}}</mat-option>

                            </mat-select>

                        </mat-form-field>
                        <mat-error *ngIf="filterForm.controls['filterValueFourth']?.errors?.required">
                            Please Select Nature Of Work
                        </mat-error>
                    </div>
                    <div class="col-sm-1">
                        <div class="form-group">
                            <button type="submit" *ngIf="!allTypeBoolean" class="btn formButton btn-secondary"
                                (click)="filterApplication()">Search</button>
                            <!-- <button mat-raised-button class="btn dspButton btn-danger mx-1"
                                (click)="exporter.exportTable('xlsx', {fileName:'Consumer-ApplicationList', sheet: 'sheet_name'})"
                                *ngIf="finalArrayt!== null">
                                Download Excel
                            </button> -->
                        </div>
                    </div>

                    <!-- <div class="col-sm-3" align="right">
                        <label class="form-label">Request for Refund</label>
                        <select class="form-select">
                            <option value="1">Cancellation Application</option>
                            <option value="2">Return Material</option>
                        </select>
                    </div> -->

                    <!-- <div class="col-sm-3 mb-2">
                        <label class="form-label">Request for Refund <span>  <mat-icon>fiber_new</mat-icon> </span></label>
                        <mat-form-field appearance="outline" class="form-group">
                            <mat-select disableRipple>
                                <mat-option value="0" selected disabled> Select Refund Type</mat-option>
                                <mat-option value="1">Cancellation Application</mat-option>
                                <mat-option value="2">Return Material</mat-option>
                            </mat-select>

                        </mat-form-field>
                    </div> -->

                    <div class="col-sm-3 mb-2">
                        <label class="form-label d-flex align-items-center"
                            style="font-size: 1.5em; font-weight: 700;color: rgb(40, 40, 113);">
                            <mat-icon class="ms-1" style="color: red;">fiber_new</mat-icon> Request for Refund

                        </label>

                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label style="font-size: 1em; font-weight: 700;color: rgb(40, 40, 113);">Select Refund
                                Type </mat-label>
                            <mat-select (selectionChange)="onNavigationClick($event.value)">
                                <mat-option value="" disabled>Select Refund Type</mat-option>
                                <mat-option value="2">Cancellation Application</mat-option>
                                <mat-option value="1">Return Material</mat-option>
                                <mat-option value="3">Duplicate Payment Refund</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>




                </div>

                <!-- <div class="form-group text-right">
                    <span class="text-danger" style="font-weight: bold;"> *आवेदन की वास्तविक स्थिति के लिए यहा क्लिक
                        करे। </span> <button type="submit" class="btn formButton btn-secondary me-2"
                        (click)="onLatestData()"><span> <mat-icon>touch_app</mat-icon></span>Latest Update</button>
                    <span><button type="button" class="btn btn-primary" (click)="goBack()">Go-Back</button></span>

                </div> -->
            </div>
        </form>
    </div>



    <div class="mat-elevation-z8 table-container">

        <div class="table_consumerapplication">
            <mat-table [dataSource]="listData" matTableExporter #exporter="matTableExporter"
                [hiddenColumns]="[20,21,22,23,24]" matSort class="dsp-cunsumertable">

                <!-- Position Column -->
                <ng-container matColumnDef="position">
                    <mat-header-cell *matHeaderCellDef mat-sort-header class="custom-header-cell" class="mw-5"> No.
                        <br>क्रमांक
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element; let i = index;" class="custom-header-cell" class="mw-10">
                        {{paginator.pageSize * paginator.pageIndex + i + 1}}
                    </mat-cell>
                </ng-container>

                <!-- Application No Column -->
                <ng-container matColumnDef="consumerApplicationNo" style="width: 10%;">
                    <mat-header-cell *matHeaderCellDef mat-sort-header class="mw-10">Application No <br>(आवेदन
                        क्रमांक)</mat-header-cell>
                    <mat-cell *matCellDef="let element" class="mw-10">{{element.consumerApplicationNo}} </mat-cell>
                </ng-container>

                <!-- natureOfWorkType -->
                <ng-container matColumnDef="natureOfWorkType" style="width: 10%;">
                    <mat-header-cell *matHeaderCellDef mat-sort-header class="mw-10">Nature of
                        Work-<br>(कार्य प्रकार)
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element" class="mw-10">{{element.natureOfWorkType.natureOfWorkName}}
                    </mat-cell>
                </ng-container>

                <!-- applicantName -->
                <ng-container matColumnDef="ApplicantName" style="width: 10%;">
                    <mat-header-cell *matHeaderCellDef mat-sort-header class="mw-10">Applicant Name <br>(आवेदक का नाम)
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element" class="mw-10">{{element.consumerName}} </mat-cell>
                </ng-container>

                <!-- address -->
                <ng-container matColumnDef="addressnew" style="width: 10%;">
                    <mat-header-cell *matHeaderCellDef mat-sort-header class="mw-10">Work Location address
                        <br>(कार्यस्थल का पता)
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element"
                        class="mw-10">{{element.workAllocationAddress?element.workAllocationAddress:element?.address}}
                    </mat-cell>
                </ng-container>



                <!-- Scheme Type Column -->
                <ng-container matColumnDef="schemeType">
                    <mat-header-cell class="mw-15" *matHeaderCellDef mat-sort-header>Scheme Type <br>(योजना का
                        प्रकार)</mat-header-cell>
                    <mat-cell class="mw-15" *matCellDef="let element">{{element.schemeType.schemeTypeName}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="natureOfWorkName">
                    <mat-header-cell class="mw-15" *matHeaderCellDef mat-sort-header>Nature of Work-<br>(कार्य
                        प्रकार)</mat-header-cell>
                    <mat-cell class="mw-15" *matCellDef="let element">{{element.natureOfWorkType.natureOfWorkName}}
                    </mat-cell>
                </ng-container>

                <ng-container matColumnDef="dcName">
                    <mat-header-cell class="mw-15" *matHeaderCellDef mat-sort-header>Distribution Center<br> (वितरण
                        केंद्र)</mat-header-cell>
                    <mat-cell class="mw-15" *matCellDef="let element">{{element.distributionCenter.dcName}} </mat-cell>
                </ng-container>

                <!-- Consumer Name Column -->
                <ng-container matColumnDef="consumerName" class="mw-15">
                    <mat-header-cell class="mw-15" *matHeaderCellDef mat-sort-header>Applicant Name</mat-header-cell>
                    <mat-cell class="mw-15" *matCellDef="let element"> {{element.consumerName}} </mat-cell>
                </ng-container>

                <!-- Guardian Name Column -->
                <ng-container matColumnDef="guardianName">
                    <mat-header-cell class="mw-15" *matHeaderCellDef mat-sort-header>Father/Husband
                        Name</mat-header-cell>
                    <mat-cell class="mw-15" *matCellDef="let element"> {{element.guardianName}} </mat-cell>
                </ng-container>

                <!-- Address Column -->
                <ng-container matColumnDef="address">
                    <mat-header-cell class="mw-10" *matHeaderCellDef mat-sort-header>Address</mat-header-cell>
                    <mat-cell class="mw-10" *matCellDef="let element"> {{element.address}} </mat-cell>
                </ng-container>

                <!-- Area Column -->
                <ng-container matColumnDef="area">
                    <mat-header-cell class="mw-20" *matHeaderCellDef mat-sort-header>Area</mat-header-cell>
                    <mat-cell class="mw-20" *matCellDef="let element"> {{element.area}} </mat-cell>
                </ng-container>

                <!-- Bill No Column -->
                <!-- <ng-container matColumnDef="billNo">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Bill No</mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.billNo}} </mat-cell>
                    </ng-container> -->

                <!-- DTR Code Column -->
                <ng-container matColumnDef="dtrCode">
                    <mat-header-cell class="mw-20" *matHeaderCellDef mat-sort-header>DTR Code</mat-header-cell>
                    <mat-cell class="mw-20" *matCellDef="let element"> {{element.dtrCode}} </mat-cell>
                </ng-container>

                <!-- Pole No Column -->
                <ng-container matColumnDef="poleNo">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Pole No</mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.poleNo}} </mat-cell>
                </ng-container>

                <!-- Aadhar No Column -->
                <ng-container matColumnDef="aadharNo">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Aadhar No</mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.aadharNo}} </mat-cell>
                </ng-container>

                <!-- Pan No Column -->
                <ng-container matColumnDef="panNo">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Aan No</mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.panNo}} </mat-cell>
                </ng-container>

                <!-- Application Stage Column -->
                <ng-container matColumnDef="stage" class="mw-30">
                    <mat-header-cell class="mw-30" *matHeaderCellDef mat-sort-header>Application Pending On <br>( आवेदन
                        लंबित स्तर पर)</mat-header-cell>
                    <mat-cell *matCellDef="let element" class="mw-30">
                        <b>


                            {{ element.applicationStatus?.applicationStatusName }}

                        </b>
                        <br>


                        <span style="font-size: 1.5em; font-weight: 900; text-decoration: underline; text-decoration-color: rgb(15, 15, 229);">
                            <a href="javascript:void(0)"  *ngIf="(element?.natureOfWorkType?.natureOfWorkTypeId == 5) &&
            element?.nscApplicationNo != null &&
            element?.sspApplicationCompleteDate != null &&
            element.applicationStatus?.applicationStatusId != 29 &&
            element.applicationStatus?.applicationStatusId != 30 &&
            element.applicationStatus?.applicationStatusId != 33 &&
            element.applicationStatus?.applicationStatusId != 35 &&
            element.applicationStatus?.applicationStatusId != 36 &&
            element.applicationStatus?.applicationStatusId != 37 &&
            element.applicationStatus?.applicationStatusId != 38 &&
            element.applicationStatus?.applicationStatusId != 39 &&
            element.applicationStatus?.applicationStatusId != 40 &&
            element.applicationStatus?.applicationStatusId != 41 &&
            element.applicationStatus?.applicationStatusId != 42 &&
            element.applicationStatus?.applicationStatusId != 43 &&
            element.applicationStatus?.applicationStatusId > 23"
                                (click)="onRevertAtSspPortal(element?.nscApplicationNo)">
                                MOVE TO SSP PORTAL
                            </a>
                        </span>

                        <span style="font-size: 1.5em; font-weight: 900; text-decoration: underline; text-decoration-color: rgb(15, 15, 229);">
                            <a href="javascript:void(0)" *ngIf="(element?.natureOfWorkType?.natureOfWorkTypeId == 2 || element?.natureOfWorkType?.natureOfWorkTypeId == 7) &&
            element?.nscApplicationNo != null &&
            element?.sspApplicationCompleteDate != null &&
            element.applicationStatus?.applicationStatusId != 35 &&
            element.applicationStatus?.applicationStatusId != 36 &&
            element.applicationStatus?.applicationStatusId != 37 &&
            element.applicationStatus?.applicationStatusId != 38 &&
            element.applicationStatus?.applicationStatusId != 39 &&
            element.applicationStatus?.applicationStatusId != 40 &&
            element.applicationStatus?.applicationStatusId != 41 &&
            element.applicationStatus?.applicationStatusId != 42 &&
            element.applicationStatus?.applicationStatusId != 43 &&
            element.applicationStatus?.applicationStatusId > 32"
                                (click)="onRevertAtSspPortal(element?.nscApplicationNo)"  >
                                MOVE TO SSP PORTAL
                            </a>
                        </span>





                    </mat-cell>
                </ng-container>

                <!-- Status Column -->
                <ng-container matColumnDef="status">
                    <mat-header-cell class="mw-10" *matHeaderCellDef mat-sort-header>Status <br> (वर्तमान
                        स्थिति)</mat-header-cell>
                    <mat-cell class="mw-10" *matCellDef="let element">
                        <b>


                            <span *ngIf="element?.applicationStatus?.applicationStatusId == 29"
                                style="color:black; background-color: crimson; padding: 8%;font:bold;">
                                Rejected
                            </span>
                            <span
                                *ngIf="element?.applicationStatus?.applicationStatusId != 33 && element?.applicationStatus?.applicationStatusId != 29"
                                style="color:black; background-color: orange; padding: 8%; font:bold;">
                                Pending
                            </span>
                            <span *ngIf="element?.applicationStatus?.applicationStatusId == 33"
                                style="color:white; background-color: green; padding: 8%;font:bold;">
                                Completed
                            </span>



                        </b>
                    </mat-cell>
                </ng-container>



                <!-- *************************************************************************************************************************** -->

                <ng-container matColumnDef="edit">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Edit/View <br> परिवर्तन/देखे</th>
                    <td mat-cell *matCellDef="let row">

                        <div class="dsp_tootltips_info">
                            <span class="btn_tootltips">
                                <button type="button" class="btn btn-primary">विवरण/कार्यवाही</button>
                            </span>
                            <div class="dsp_tooltipdropdown">

                                <div class="btn-actionifo">

                                    <div class="btn-actionifo">

                                        <span
                                            *ngIf="row.applicationStatus?.applicationStatusId <= 5 && row.applicationStatus?.applicationStatusId!=3 && row.isRejected != 1">
                                            <button matTooltip="View Consumer Application"
                                                matTooltip="Edit Consumer Application" mat-icon-button color="primary"
                                                (click)="onEdit(row.consumerApplicationId,row)"
                                                class="m-1 btnaction_custome">
                                                <mat-icon>launch</mat-icon>
                                            </button>
                                        </span>


                                        <!-- *appHasRole="role.todo_module_view" -->
                                        <!-- <span>
                                            <button matTooltip="View Consumer Application" mat-icon-button
                                                color="primary" (click)="onView(row,row.consumerApplicationId)">
                                                <mat-icon> all_out</mat-icon>
                                            </button>
                                        </span> -->

                                        <span>
                                            <button matTooltip="View Consumer Application" mat-icon-button
                                                color="primary" (click)="onNewView(row,row.consumerApplicationId)">
                                                <mat-icon> all_out</mat-icon>
                                            </button>
                                        </span>
                                        <!-- </ng-container> -->

                                         <span
                                            *ngIf="row.natureOfWorkType?.natureOfWorkTypeId==7 && row.applicationStatus?.applicationStatusId <6">
                                            <button
                                                
                                                class="btn btn-sm btn-warning m-1 btnaction_custome"
                                                (click)="onApplicationRejection(row)">
                                                Application Rejection
                                            </button>
                                        </span>

                                         <!-- <span
                                            *ngIf="row.natureOfWorkType?.natureOfWorkTypeId==7">
                                            <button
                                                
                                                class="btn btn-sm btn-warning m-1 btnaction_custome"
                                                (click)="onApplicationRejection(row)">
                                                Application Rejection
                                            </button>
                                        </span> -->


                                        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
                                        <span
                                            *ngIf="row.natureOfWorkType?.natureOfWorkTypeId!=8 && !(row?.nscApplicationNo!=null && row?.natureOfWorkType?.natureOfWorkTypeId==5 && row.applicationStatus?.applicationStatusId==21)">
                                            <button
                                                *ngIf="row.applicationStatus?.applicationStatusId >=12  && row.applicationStatus?.applicationStatusId!=24 && row.applicationStatus?.applicationStatusId!=36 && row.applicationStatus?.applicationStatusId!=38 && row.revisedErpNumber==null  && row.isRejected!= 1 "
                                                class="btn btn-sm btn-warning m-1 btnaction_custome"
                                                (click)="applicationDemandGenerate(row.consumerApplicationId,row.previousStage,row.consumerApplicationNo,row?.schemeTypeId,row)">
                                                Application Demand
                                            </button>
                                        </span>

                                        <span
                                            *ngIf="row.natureOfWorkType?.natureOfWorkTypeId!=8 && !(row?.nscApplicationNo!=null && row?.natureOfWorkType?.natureOfWorkTypeId==5 && row.applicationStatus?.applicationStatusId==21)">
                                            <button
                                                *ngIf="row.applicationStatus?.applicationStatusId >=12  && row.applicationStatus?.applicationStatusId!=24 && row.applicationStatus?.applicationStatusId!=36 && row.applicationStatus?.applicationStatusId!=38 && row.revisedErpNumber!=null  && row.isRejected!= 1 "
                                                class="btn btn-sm btn-warning m-1 btnaction_custome"
                                                (click)="applicationReviseDemandGenerate(row)">
                                                Application Revise Demand
                                            </button>
                                        </span>

                                        <span *ngIf="row.natureOfWorkType?.natureOfWorkTypeId==8">
                                            <button
                                                *ngIf="row.applicationStatus?.applicationStatusId >=12 && row.applicationStatus?.applicationStatusId!=24 && row.applicationStatus?.applicationStatusId!=36 && row.applicationStatus?.applicationStatusId!=38 && row.revisedErpNumber==null  && row.isRejected!= 1 "
                                                class="btn btn-sm btn-warning m-1 btnaction_custome"
                                                (click)="applicationDemandGenerateForMkmy(row.consumerApplicationId,row.consumerApplicationNo,row?.schemeTypeId,row.natureOfWorkType?.natureOfWorkTypeId,row)">
                                                Application Demand
                                            </button>
                                        </span>



                                        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->


                                        <span
                                            *ngIf="row?.nscApplicationNo!=null">
                                            <button class=" btn-sm "
                                                *ngIf="row.applicationStatus?.applicationStatusId == 3"
                                                (click)="onNscApplicatonUpdate(row)" type="button"
                                                class="btn btn-danger m-1 btnaction_custome">
                                                Update Application
                                            </button>
                                        </span>

                                        <!-- <img src="assets/images/payUimage.png" title="PAYU" class=".col resize" alt="PAYU"> -->
                                        <span *ngIf="row.natureOfWorkType?.natureOfWorkTypeId!=8">
                                            <button class=" btn-sm "
                                                *ngIf="row.applicationStatus?.applicationStatusId == 5 && row.isRejected != 1"
                                                matTooltip="Pay Registration Fees "
                                                (click)="onRegistrationFeePaymentProceed(row.consumerApplicationNo ,1,row)"
                                                type="button" class="btn btn-warning m-1 btnaction_custome">
                                                Pay Registration fees
                                            </button>
                                        </span>

                                        <span>
                                            <button class=" btn-sm "
                                                *ngIf="row.applicationStatus?.applicationStatusId == 36 && row.isRejected != 1"
                                                (click)="ConsumerFileReUpload(row)" type="button"
                                                class="btn btn-danger m-1 btnaction_custome">
                                                Wrong Document
                                            </button>
                                        </span>

                                        <span>
                                            <button class=" btn-sm m-1"
                                                *ngIf="row.applicationStatus?.applicationStatusId == 12  && row.isRejected   != 1 "
                                                matTooltip="Pay Demand Fees "
                                                (click)="onDemandFeePaymentProceed(row.consumerApplicationNo,2,row.natureOfWorkType?.natureOfWorkTypeId,row.applicationStatus?.applicationStatusId,row)"
                                                type="button" class="btn btn-warning btnaction_custome">
                                                Pay Demand
                                            </button>
                                        </span>

                                        <span>
                                            <button class=" btn-sm m-1"
                                                *ngIf="(row.applicationStatus?.applicationStatusId == 30 && row.erpVersion!=null )&& row.isRejected   != 1 "
                                                matTooltip="Pay Demand Fees "
                                                (click)="onDemandFeePaymentProceed(row.consumerApplicationNo,2,row.natureOfWorkType?.natureOfWorkTypeId,row.applicationStatus?.applicationStatusId,row)"
                                                type="button" class="btn btn-warning btnaction_custome">
                                                Pay Demand
                                            </button>
                                        </span>


                                        <!-- <button class=" btn-sm m-1"
                                *ngIf="(row.natureOfWorkType?.natureOfWorkTypeId==2 || row.natureOfWorkType?.natureOfWorkTypeId==5 || row.natureOfWorkType?.natureOfWorkTypeId==8) && row.applicationStatus?.applicationStatusId == 33 && row.isRejected != 1 "
                                (click)="onFeedback(row.consumerApplicationNo)"
                                type="button" class="btn btn-success btnaction_custome">
                                Applicant Feedback
                            </button> -->

                                        <!-- <button class=" btn-sm m-1"
                           
                            (click)="onComplain(row.consumerApplicationNo)"
                            type="button" class="btn btn-secondary btnaction_custome">
                            Complain
                        </button> -->

                                        <!-- <div class="mx-5">
                                <button  style="text-align: right;" mat-raised-button (click)="onComplain()">
                                    <mat-icon>add</mat-icon>Apply Complain
                                </button>
                            </div> -->

                                        <span>
                                            <button class=" btn-sm m-1"
                                                *ngIf="(row.natureOfWorkType?.natureOfWorkTypeId==1 || row.natureOfWorkType?.natureOfWorkTypeId==3 || row.natureOfWorkType?.natureOfWorkTypeId==4 || row.natureOfWorkType?.natureOfWorkTypeId==6 || row.natureOfWorkType?.natureOfWorkTypeId==7) && row.applicationStatus?.applicationStatusId == 28 && row.isRejected != 1 "
                                                (click)="onFeedback(row.consumerApplicationNo)" type="button"
                                                class="btn btn-success btnaction_custome">
                                                Applicant Feedback
                                            </button>
                                        </span>






                                        <!-- <div class="mx-5">
                                    <button  style="text-align: right;" mat-raised-button (click)="onFeedback(row.consumerApplicationNo)">
                                        <mat-icon>add</mat-icon>Applicant Feedback
                                    </button>
                                </div> -->

                                        <!-- && row.erpVersion!=null -->

                                        <!-- <button class=" btn-sm m-1"
                                    matTooltip="Pay Demand Fees "
                                    (click)="onReviseFeePaymentProceed(row)"
                                    type="button" class="btn btn-warning btnaction_custome">
                                    Revise Payment
                                </button> -->

                                        <!-- completeDate >= row.paymentDate -->
                                        <span *ngIf="row.natureOfWorkType?.natureOfWorkTypeId!=8">
                                            <button class=" btn-sm "
                                                *ngIf="row.applicationStatus?.applicationStatusId == 21  && row.natureOfWorkType?.natureOfWorkTypeId==5 && row?.schemeType?.schemeTypeId != 2"
                                                matTooltip="Contractor"
                                                (click)="onSelectContractor(row.consumerApplicationNo,row.consumerApplicationId)"
                                                type="button" class="btn   btn-warning btnaction_custome">
                                                select contractor
                                            </button>
                                        </span>

                                        <span *ngIf="row.natureOfWorkType?.natureOfWorkTypeId!=8">
                                            <button class=" btn-sm "
                                                *ngIf="row.applicationStatus?.applicationStatusId == 21  && row.natureOfWorkType?.natureOfWorkTypeId!=5 && row?.schemeType?.schemeTypeId != 2 "
                                                matTooltip="Contractor"
                                                (click)="onSelectContractor(row.consumerApplicationNo,row.consumerApplicationId)"
                                                type="button" class="btn   btn-warning btnaction_custome">
                                                select contractor
                                            </button>
                                        </span>

                                        <span>
                                            <button class=" btn-sm "
                                                *ngIf="row.applicationStatus?.applicationStatusId >12 && row.applicationStatus?.applicationStatusId!=38 && row.paymentModeManual=='True'"
                                                matTooltip="Contractor" (click)="OnDemandRecipt(row)" type="button"
                                                class="btn   btn-warning btnaction_custome">
                                                Demand Receipt
                                            </button>
                                        </span>

                                        <span>
                                            <button
                                                *ngIf="row.applicationStatus?.applicationStatusId ==38  && row.isRejected != 1"
                                                matTooltip="Consumer-Update-Form"
                                                (click)="OnUpdateConsumerApplicationForm(row.consumerApplicationId,row)"
                                                class="btn btn-danger">
                                                Consumer-Update-Form
                                            </button>
                                        </span>


                                        <span *ngIf="row.natureOfWorkType?.natureOfWorkTypeId!=8">
                                            <button
                                                *ngIf=" ( row.applicationStatus?.applicationStatusId >= 24 && row.applicationStatus?.applicationStatusId!=29 && row.applicationStatus?.applicationStatusId!=30 && row.applicationStatus?.applicationStatusId!=33 && row.applicationStatus?.applicationStatusId!=35 && row.applicationStatus?.applicationStatusId!=36 && row.applicationStatus?.applicationStatusId!=37 && row.applicationStatus?.applicationStatusId!=38 && row.applicationStatus?.applicationStatusId!=39 && row.applicationStatus?.applicationStatusId!=40 && row.applicationStatus?.applicationStatusId!=41 && row.applicationStatus?.applicationStatusId!=42 && row.applicationStatus?.applicationStatusId!=43 && row.isRejected != 1  )"
                                                matTooltip="work order workOrdergGenreateSuccessfull"
                                                class="btn btn-sm btn-warning btnaction_custome"
                                                (click)="workOrdergGenreateSuccessfull(row.consumerApplicationNo,row.consumerApplicationId,row)">
                                                Work Order View
                                            </button>
                                        </span>

                                        <span *ngIf="row.natureOfWorkType?.natureOfWorkTypeId==8">
                                            <button
                                                *ngIf=" ( row.applicationStatus?.applicationStatusId >= 21 && row.applicationStatus?.applicationStatusId!=29 && row.applicationStatus?.applicationStatusId!=30 && row.applicationStatus?.applicationStatusId!=33 && row.applicationStatus?.applicationStatusId!=35 && row.applicationStatus?.applicationStatusId!=36 && row.applicationStatus?.applicationStatusId!=37 && row.applicationStatus?.applicationStatusId!=38 && row.applicationStatus?.applicationStatusId!=39 && row.applicationStatus?.applicationStatusId!=40 && row.applicationStatus?.applicationStatusId!=41 && row.applicationStatus?.applicationStatusId!=42 && row.applicationStatus?.applicationStatusId!=43 &&  row.applicationStatus?.applicationStatusId != 23 && row.isRejected != 1  )"
                                                matTooltip="work order workOrdergGenreateSuccessfull"
                                                class="btn btn-sm btn-warning btnaction_custome"
                                                (click)="workOrdergGenreateSuccessfull(row.consumerApplicationNo,row.consumerApplicationId,row)">
                                                Work Order View
                                            </button>
                                        </span>



                                        <span
                                            *ngIf="!(row?.nscApplicationNo!=null && row?.natureOfWorkType?.natureOfWorkTypeId==5 && row.applicationStatus?.applicationStatusId==21)">
                                            <div
                                                *ngIf="row.applicationStatus?.applicationStatusId >= 6 && row.applicationStatus?.applicationStatusId!=36 && row.applicationStatus?.applicationStatusId!=38 && row.isRejected != 1">
                                                <button class="btn btn-sm btn-primary m-1 "
                                                    (click)="downloadRegistrationReciept(row.consumerApplicationNo,1)">Download
                                                    Registration Receipt</button>
                                            </div>

                                            <div
                                                *ngIf="row.applicationStatus?.applicationStatusId > 12 && row.applicationStatus?.applicationStatusId!=36 &&  row.applicationStatus?.applicationStatusId!=38 && row.applicationStatus?.applicationStatusId!=36 &&  row.isRejected != 1 && row.paymentModeManual==null">
                                                <button class="btn btn-sm btn-primary m-1 "
                                                    (click)="downloadDemandReciept(row.consumerApplicationNo,2)">Download
                                                    Demand
                                                    Receipt</button>
                                            </div>
                                        </span>

                                    </div>

                                </div>
                            </div>
                        </div>
                    </td>
                </ng-container>


                <!-- *********************************************************************************************************************************** -->




                <ng-container matColumnDef="loading">
                    <mat-footer-cell *matFooterCellDef colspan="6">
                        Loading data...
                    </mat-footer-cell>
                </ng-container>

                <ng-container matColumnDef="noData">
                    <mat-footer-cell *matFooterCellDef colspan="6">
                        No data.
                    </mat-footer-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{'hide':listData!=null}"></mat-footer-row>
                <mat-footer-row *matFooterRowDef="['noData']"
                    [ngClass]="{'hide':!(listData!=null && listData?.data?.length==0)}">
                </mat-footer-row>
            </mat-table>
        </div>

        <mat-paginator #paginator [length]="tableMeta?.totalItems" [pageSize]="10" [pageIndex]=0
            [pageSizeOptions]="[10,20,30,50,100,1000,5000]" (page)="onPaginateChange($event)" showFirstLastButtons>
        </mat-paginator>


    </div>
</mat-card>