<mat-card>

  <div class="row " style="background-color: #007bff;">

    <div class="col-md-12 w-60">
      <app-track-header></app-track-header>
    </div>
    <div class="col-md-4"></div>

  </div>

  <br>
  <br>
  <br>
  <div style="display: flex; justify-content: space-between;">
    <div></div>
    <div style="font-size: 2em; font-weight: bold;">
      Track Your Application:
    </div>
    <div></div>
  </div>
  <br>
  <br>

  <hr>

  <br>

  <div style="display: flex; justify-content: space-between;">
    <div></div>
    <div style="font-size: 1.5em; font-weight: 700;">

      <mat-radio-group aria-label="Select an option" (change)="onSelectPortal($event.value)">
        <mat-radio-button value="DSP" style="margin-right: 5em;"> DSP PORTAL  </mat-radio-button>
        <mat-radio-button value="SSP" style="margin-left: 5em;">SSP PORTAL</mat-radio-button>
      </mat-radio-group>

    </div>
    <div></div>
  </div>
  
  <br>
  <br>



  <form [formGroup]="trackForm">

    <div class="row">

      <div class="col-md-4 form-group"></div>

      <div class="col-md-4 form-group">
        <div>
          <label class="form-label" style="font-size: 1.1em; font-weight: 700;">Search Application by<span
              class="text-danger">*</span> </label>
          <select class="form-control form-select" formControlName="trackType" (change)=" displayInputFieldForTrackType($event)" >
            <!-- <option [value]="">Search Application By</option> -->
            <option *ngFor="let data of displayInputFieldArray" [value]="data.id">{{data.name}}</option>
          </select>

          <span class="text-danger"
            *ngIf="(trackForm.controls.trackType.touched && trackForm?.controls?.trackType?.errors?.required) || (submitted && trackForm['controls'].trackType.errors?.required) ">
            Choose Search Type
          </span>
        </div>
        <br>

        <div *ngIf="selectionType ==1">
          <label class="form-label" style="font-size: 1.1em; font-weight: 700;">Application Number<span
              class="text-danger">*</span> </label>
          <input class="form-control" formControlName="applicationNo"
            placeholder="---------------------------------------------Application Number-------------------------------------------------------">
        </div>

        <br>

        <div *ngIf="selectionType ==2 || selectionType ==3">
          <label class="form-label" style="font-size: 1.1em; font-weight: 700;">Mobile Number<span
              class="text-danger">*</span> </label>
          <input class="form-control" formControlName="mobileNo"
            placeholder="---------------------------------------------Mobile Number----------------------------------------------------------">
        </div>


        <br>

        <div *ngIf="(selectionType==1 && !otpBoolean) || (selectionType==2 && !otpBoolean) || (selectionType==3 && !otpBoolean)">
          <button type="button" class="btn btn-primary" (click)="onSubmit()">Search</button>
        </div>

        <form [formGroup]="OtpForm" *ngIf="otpBoolean">
          <div class="form-group" style="display: flex; justify-content: center;">
            <div>
              <label class="form-label">Enter OTP</label>
              <input class="form-control" type="number" maxlength="4" formControlName="otp">
              <br>
              <div>
                <button type="button" class="btn btn-success" (click)="againresendOtp()">Resend OTP</button>
              </div>
            </div>
            <div>
              <button type="button" class="btn btn-success mx-5 mt-4" (click)="OtpVerifySubmit()">Submit</button>
            </div>
          </div>
        </form>


      </div>

      <div class="col-md-4 form-group"></div>

    </div>

  </form>



  <br>

  <div *ngIf="tableShowBoolean==true">
    <div class="mat-elevation-z8 table-container">
      <table mat-table [dataSource]="dataSource">


        <ng-container matColumnDef="consumerApplicationNo">
          <th mat-header-cell *matHeaderCellDef> Consumer Application Number </th>
          <td mat-cell *matCellDef="let element"> {{element.consumerApplicationNo}} </td>
        </ng-container>


        <ng-container matColumnDef="consumerName">
          <th mat-header-cell *matHeaderCellDef> Name </th>
          <td mat-cell *matCellDef="let element"> {{element.consumerName}} </td>
        </ng-container>


        <ng-container matColumnDef="schemeType">
          <th mat-header-cell *matHeaderCellDef> Scheme Type <br> (योजना का प्रकार) </th>
          <td mat-cell *matCellDef="let element"> {{element.schemeType?.schemeTypeName}} </td>
        </ng-container>


        <ng-container matColumnDef="natureOfWork">
          <th mat-header-cell *matHeaderCellDef> Nature of Work-<br>(कार्य प्रकार) </th>
          <td mat-cell *matCellDef="let element"> {{element.natureOfWorkType?.natureOfWorkName}}</td>


        </ng-container>


        <ng-container matColumnDef="ApplicationStatus">
          <th mat-header-cell *matHeaderCellDef> Application Pending On <br> (आवेदन
            लंबित स्तर पर) </th>
          <td mat-cell *matCellDef="let element">
            <b>
              <div
                *ngIf="(element.natureOfWorkType?.natureOfWorkTypeId==8 && element.applicationStatus?.applicationStatusId==21) || (element.natureOfWorkType?.natureOfWorkTypeId!=8 && element?.schemeType?.schemeTypeId==2 && element.applicationStatus?.applicationStatusId==21)">

                Pending for Contractor Selection After Tender By DGM-STC
              </div>
              <div
                *ngIf="(element.natureOfWorkType?.natureOfWorkTypeId==8 && element.applicationStatus?.applicationStatusId!=21) || (element.natureOfWorkType?.natureOfWorkTypeId!=8 && element?.schemeType?.schemeTypeId!=2) || (element.natureOfWorkType?.natureOfWorkTypeId!=8 && element.applicationStatus?.applicationStatusId!=21)">
                {{ element.applicationStatus?.applicationStatusName }}
              </div>
            </b>
          </td>
        </ng-container>





        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef> Action </th>
          <td mat-cell *matCellDef="let element">
            <button type="button" class="btn btn-success" (click)="onView(element)">View</button>
          </td>
        </ng-container>



        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>


    </div>

  </div>







</mat-card>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>